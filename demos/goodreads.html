<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>goodreads from vj</title>
  </head>
  <body>
    <h1>Goodreads API</h1>
    <script src="./js/jquery-3.3.1.min.js"></script>
    <script>
    $(document).ready(function () {
      $.ajax({
        method: 'GET',
        crossDomain: true,
        url: "https://www.goodreads.com/search/index.xml",
        data: {
          'q': 'anna',
          'key': '9ZVefZRKvvSiLfY7f3pQ',
          'search': 'all'
        },
        contentType: 'application/xml; charset=utf-8;',
        dataType: 'xml',
        success: function(data) {
          console.log(data);
        }
      });
      // $.ajax({
      //   type: "GET",
      //   url: "https://www.goodreads.com/search/index.xml",
      //   cache: false,
      //   dataType: "xml",
      //   contentType: "application/xml; charset=UTF-8",
      //   success: function(xml) {
      //     $(xml).find('name').each(function(){
      //       var name = $(this).text();
      //       alert(name);
      //     });
      //   }
      // });
    });

    // $(function () {
    //   function loadDoc() {
    //     var xhttp = new XMLHttpRequest();
    //     xhttp.onreadystatechange = function() {
    //       if (this.readyState == 4 && this.status == 200) {
    //       myFunction(this);
    //       }
    //     };
    //     xhttp.open("GET", "https://www.goodreads.com/search/index.xml", true);
    //     xhttp.setRequestHeader('Content-Type',   'application/xml');
    //     xhttp.setRequestHeader('Accept', 'application/xml');
    //     xhttp.setRequestHeader("Ocp-Apim-Subscription-Key", "9ZVefZRKvvSiLfY7f3pQ");
    //     xhttp.send();
    //   }
    //   function myFunction(xml) {
    //     var i;
    //     var xmlDoc = xml.responseXML;
    //     var table="<tr><th>Title</th><th>Artist</th></tr>";
    //     var x = xmlDoc.getElementsByTagName("CD");
    //     for (i = 0; i <x.length; i++) {
    //       table += "<tr><td>" +
    //       x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
    //       "</td><td>" +
    //       x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
    //       "</td></tr>";
    //     }
    //     document.getElementById("demo").innerHTML = table;
    //   }
    //   loadDoc();
    // });
    // let url = 'https://www.goodreads.com/search/index.xml'
    // let data = {
    //   'q': 'anna',
    //   'key': '9ZVefZRKvvSiLfY7f3pQ',
    //   'search': 'all'
    // }
    // let dataType = 'jsonp'
    // let options = {
    //   url: url,
    //   data: data,
    //   dataType: dataType
    // };
    // $.ajax({
    //   url: 'https://www.goodreads.com/search/index.xml',
    //   data: data,
    //   type: 'GET',
    //   contentType: "application/xml",
    //   dataType: 'jsonp',
    // }).done(function(json) {
    //   // Code to run if the request succeeds (is done);
    //   // The response is passed to the function
    //    $( "<h1>" ).text( json.title ).appendTo( "body" );
    //    $( "<div class=\"content\">").html( json.html ).appendTo( "body" );
    // }).fail(function( xhr, status, errorThrown ) {
    //   // Code to run if the request fails; the raw request and
    //   // status codes are passed to the function
    //   alert( "Sorry, there was a problem!" );
    //   console.log( "Error: " + errorThrown );
    //   console.log( "Status: " + status );
    //   console.dir( xhr );
    // })
    // // Code to run regardless of success or failure;
    // .always(function( xhr, status ) {
    //   alert( "The request is complete!" );
    // });
    </script>
  </body>
</html>
